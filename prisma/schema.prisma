generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Request {
  id              String   @id
  author_id       String
  target_id       String
  guild_id        String
  reason          String
  punishment_type String
  status          String   @default("pending")
  created_at      DateTime @default(now())
  /// ID of the auto-mute infraction - only applicable to ban requests
  mute_id         Int?
  /// Duration of the mute - only applicable to mute requests
  duration        Int?
}

model Message {
  id           String   @id
  author_id    String
  channel_id   String
  guild_id     String
  /// Epoch timestamp in milliseconds
  created_at   DateTime
  content      String?
  sticker_id   String?
  /// ID of the message this message is replying to
  reference_id String?
  category_id  String?
  deleted      Boolean  @default(false)
}

model Infraction {
  id                Int       @id @default(autoincrement())
  guild_id          String
  action            String
  executor_id       String
  target_id         String
  reason            String
  created_at        DateTime  @default(now())
  flag              String?
  request_author_id String?
  expires_at        DateTime?
  updated_at        DateTime?
  updated_by        String?
  archived_at       DateTime?
  archived_by       String?
}

model MessageReport {
  id          String  @id
  message_id  String  @unique
  channel_id  String
  author_id   String
  reporter_id String
  guild_id    String
  flags       Int
  status      String  @default("unresolved")
  /// ID of the moderator that resolved the report
  resolved_by String?
  content     String?
}

model UserReport {
  id          String  @id
  target_id   String
  reporter_id String
  guild_id    String
  reason      String
  status      String  @default("unresolved")
  /// ID of the moderator that resolved the report
  resolved_by String?
}